{
  //"ReRoutes": [15.x
  "Routes": [ //之前根节点是 ReRoutes(15.x) 现在是 Routes(16.x)
    //{
    //  "DownstreamPathTemplate": "/",
    //  "UpstreamPathTemplate": "/",
    //  "UpstreamHttpMethod": [
    //    "Get"
    //  ],
    //  "AddHeadersToRequest": {},
    //  "AddClaimsToRequest": {},
    //  "RouteClaimsRequirement": {},
    //  "AddQueriesToRequest": {},
    //  "RequestIdKey": "",
    //  "FileCacheOptions": {
    //    "TtlSeconds": 0,
    //    "Region": ""
    //  },
    //  "ReRouteIsCaseSensitive": false,
    //  "ServiceName": "",
    //  "DownstreamScheme": "http",
    //  "DownstreamHostAndPorts": [
    //    {
    //      "Host": "localhost",
    //      "Port": 8001
    //    }
    //  ],
    //  "QoSOptions": {
    //    "ExceptionsAllowedBeforeBreaking": 0,
    //    "DurationOfBreak": 0,
    //    "TimeoutValue": 0
    //  },
    //  "LoadBalancer": "",
    //  "RateLimitOptions": {
    //    "ClientWhitelist": [],
    //    "EnableRateLimiting": false,
    //    "Period": "",
    //    "PeriodTimespan": 0,
    //    "Limit": 0
    //  },
    //  "AuthenticationOptions": {
    //    "AuthenticationProviderKey": "",
    //    "AllowedScopes": []
    //  },
    //  "HttpHandlerOptions": {
    //    "AllowAutoRedirect": true,
    //    "UseCookieContainer": true,
    //    "UseTracing": true
    //  },
    //  "UseServiceDiscovery": false
    //},
    {
      "DownstreamPathTemplate": "/api/ocelot/{Id}",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5000
        }
      ],
      "UpstreamPathTemplate": "/ocelot/{Id}",
      "UpstreamHttpMethod": [ "Get" ]
    },
    {
      "DownstreamPathTemplate": "/api/test",
      "DownstreamScheme": "https",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 8443
        }
      ],
      "UpstreamPathTemplate": "/ocelottest",
      "UpstreamHttpMethod": [ "Get" ]
    },
    //// 转发所有的请求
    //{
    //  "DownstreamPathTemplate": "/{url}",
    //  "DownstreamScheme": "https",
    //  "DownstreamHostAndPorts": [
    //    {
    //      "Host": "localhost",
    //      "Port": 44375
    //    }
    //  ],
    //  "UpstreamPathTemplate": "/{url}",
    //  "UpstreamHttpMethod": [ "Get" ]
    //},
    //{
    //  "DownstreamPathTemplate": "/{url}",
    //  "DownstreamScheme": "https",
    //  "DownstreamHostAndPorts": [
    //    {
    //      "Host": "localhost",
    //      "Port": 44375
    //    }
    //  ],
    //  "UpstreamPathTemplate": "/{url}",
    //  "Priority": 0, //0是最低的优先级，数字越大，优先级越高。
    //  "UpstreamHttpMethod": [ "Get" ],
    //  "UpstreamHost": "localhost:47270" //如果路由配置中包含两个除UpstreamHost以外都相同的路由，即其中一个带有UpstreamHost，而另外一个没有，则Ocelot会优先选择带有UpstreamHost的路由
    //}
    {
      "DownstreamPathTemplate": "/api/ocelot/aggrWilling",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5000
        }
      ],
      "UpstreamPathTemplate": "/ocelot/aggrWilling",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "aggr_willing",
      "Priority": 2
    },
    {
      "DownstreamPathTemplate": "/api/ocelot/aggrJack",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5000
        }
      ],
      "UpstreamPathTemplate": "/ocelot/aggrJack",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "aggr_jack",
      "Priority": 2
    },
    {
      "DownstreamPathTemplate": "/api/ocelot/aggrError/1",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5000
        }
      ],
      "UpstreamPathTemplate": "/ocelot/aggrError/1",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "aggr_error",
      "Priority": 2
    }, //负载均衡 https://localhost:44375/ocelot/5
    {
      "DownstreamPathTemplate": "/api/ocelot/{postId}",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5000
        },
        {
          "Host": "localhost",
          "Port": 6000
        }
      ],
      "Priority": 20,
      "UpstreamPathTemplate": "/ocelot/{postId}",
      "UpstreamHttpMethod": [ "Get" ],
      "LoadBalancerOptions": {
        "Type": "RoundRobin"
        //"LeadConnection负载均衡器算法共有4种：
        //"LeastConnection",把新请求发送到现有请求最少的服务上
        //"RoundRobin", 轮询可用的服务并发送请求
        //"NoLoadBalancer", 不负载均衡，总是发往第一个可用的下游服务
        //"CookieStickySessions",使用cookie关联所有相关的请求到制定的服务
      }
    }
  ],
  "Aggregates": [ //请求聚合：仅支持GET方式；下游服务返回类型要求为application/json；返回内容类型为application/json，不会返回404请求
    //https://localhost:44375/aggrLeaderAdvanced
    {
      "RouteKeys": [
        "aggr_willing",
        "aggr_jack",
        "aggr_error"
      ],
      "UpstreamPathTemplate": "/aggrLeaderAdvanced",
      "Aggregator": "LeaderAdvancedAggregator"
    }
  ],
  "GlobalConfiguration": {
    "BaseUrl": "https://localhost:44375" //对外暴露的Url
  }
}
//Downstream 下游服务配置
//UpStream 上游服务配置 
//Aggregates 服务聚合配置 
//ServiceName, LoadBalancer, UseServiceDiscovery 服务发现配置 
//AuthenticationOptions 服务认证配置 
//RouteClaimsRequirement Claims 鉴权配置 
//RateLimitOptions 限流配置 
//FileCacheOptions 缓存配置 
//QosOptions 服务质量与熔断配置 
//DownstreamHeaderTransform 头信息转发配置
//https://www.cnblogs.com/markjiang7m2/p/10857688.html
